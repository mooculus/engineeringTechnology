\documentclass{ximera}

\input{../preamble.tex}

\outcome{Describe the goals of optimization problems generally.}
\outcome{Find all local maximums and minimums using the First and Second Derivative tests.}
\outcome{Identify when we can find an absolute maximum or minimum on an open interval.}
\outcome{Contrast optimization on open and closed intervals.}
\outcome{Describe the objective function and constraints in a given optimization problem.}
\outcome{Solve optimization problems by finding the appropriate extreme values.}

\title[Dig-In:]{Basic optimization}

\begin{document}
\begin{abstract}
  Now we put our optimization skills to work.
\end{abstract}
\maketitle

An \dfn{optimization problem} is a problem where you need to maximize
or minimize some quantity given some constraints. This can be
accomplished using the tools of differential calculus that we have
already developed.

Perhaps the most basic optimization problem is generated by the
following question:

\begin{quote}
  Among all rectangles of a fixed perimeter, which has the greatest area?
\end{quote}

Let's not do this problem in the abstract, let's do it with numbers.

\begin{example}
  Of all rectangles of perimeter $12$, which side lengths give the greatest area?
    \begin{explanation}
  The picture below depicts four rectangles of perimeter $12$. There are infinitely many rectangles with this property, and among all of them we have to find the one with the maximum area.
  With the help from calculus, we can easily solve this problem. 
  
  
   \begin{image}
\begin{tikzpicture}
%\draw[penColor2, dashed, very thick] (0,0) -- (5,4);\draw[penColor, dashed, very thick] (0,0) -- (0,4);
\draw[penColor, very thick] (0,0) -- (0,4);
\draw[penColor, very thick] (-6,0) -- (-6,4);
\draw[penColor,  very thick] (-6,0) -- (0,0);
\draw[penColor, very thick] (-6,4) -- (0,4);
\draw[penColor, very thick] (-8,0) -- (-8,2);
\draw[penColor, very thick] (-16,0) -- (-16,2);
\draw[penColor,  very thick] (-16,0) -- (-8,0);
\draw[penColor, very thick] (-16,2) -- (-8,2);
\draw[penColor, very thick] (2,0) -- (7,0);
\draw[penColor, very thick] (2,5) -- (7,5);
\draw[penColor,  very thick] (2,0) -- (2,5);
\draw[penColor, very thick] (7,0) -- (7,5);
\draw[penColor, very thick] (-18,0) -- (-18,1);
\draw[penColor, very thick] (-27,0) -- (-18,0);
\draw[penColor,  very thick] (-27,0) -- (-27,1);
\draw[penColor, very thick] (-27,1) -- (-18,1);
\end{tikzpicture}
\end{image}


First, let's draw a generic rectangle of perimeter $12$.


  \begin{image}
\begin{tikzpicture}
%\draw[penColor2, dashed, very thick] (0,0) -- (5,4);\draw[penColor, dashed, very thick] (0,0) -- (0,4);
\draw[penColor, very thick] (0,0) -- (0,4);
\draw[penColor, very thick] (-6,0) -- (-6,4);
\draw[penColor,  very thick] (-6,0) -- (0,0);
\draw[penColor, very thick] (-6,4) -- (0,4);

%\node [left,penColor] at (0,0) {\scalebox{3} \Ladiesroom};
%\node [right,penColor] at (6,4) {\scalebox{3}{\ding{40}}};
\node [right,penColor] at (0,2) {\huge$y$ };
\node [above,penColor2] at (-13,3.7) {\huge$\text{To maximize}: Area$ };
\node [above,penColor] at (-3,1.7) {\huge$A=x\cdot y$ };
\node [above,penColor2] at (-11.4,1.7) {\huge$Constraint: Perimeter=12$ };
\node [above,penColor] at (-3,0) {\huge$x$ };
\node [above,penColor2] at (3,3) {\huge$2x+2y=12$};
\node [above,penColor2] at (3,2) {\huge$x+y=6$};
\node [above,penColor2] at (3,1) {\huge$y=6-x$};
%\node [left,penColor] at (-.1,0) {You};
\end{tikzpicture}
\end{image}


  The area of the rectangle  is 
  \[
    A = x\cdot y.
    \]
   In order to be able to use  calculus techniques,  we have to express the area as a function of a single variable.
   
   To this end, we have to  express the variable, say $y$, in terms of $x$. How can this be achieved?
    
  Recall, we are given the constraint: ``\dots rectangles of perimeter $12$\dots''
  
    If a rectangle has perimeter $12$, then $2x+2y=12$, and we can solve for $y$ in terms of $x$,
    \[
    y=\answer[given]{6-x}.
    \]
     
    Hence the area of a rectangle of perimeter $12$ can be expressed as a function of a single variable, $x$,
    \[
    A(x) = x\left(\answer[given]{6-x}\right).
    \]
    However, for the side lengths to be physically relevant, we must
    assume that $x>0$ and $6-x>0$.
    
     Therefore, the domain of  the function $A$ is  the interval
    $\left(\answer[given]{0},\answer[given]{6}\right)$. 
      
    So, to maximize the area of the rectangle, we have to find the global maximum of the function $A$ on the interval $(0,6)$.
   Since the domain of $A$ is an open interval, the global maximum (if it exists!) has to be a local maximum and, therefore, it occurs at a critical point.
   So, we have to find all critical points of $A$ on the interval $(0,6)$.
    Since
    \[
    A'(x) = \answer[given]{6-2x},
    \]
   in order to find the critical points, we have to solve the equation
    \[
    \answer[given]{6-2x} = 0.
    \]
   It follows that the only critical point of $A$ is at $x=\answer[given]{3}$.
   
    We can make a sign chart for $A'(x)$ on the interval $(0,6)$:
    \begin{image}
\begin{tikzpicture}
	\begin{axis}[
            trim axis left,
            scale only axis,
            domain=-3:3,
            ymax=2,
            ymin=-2,
            axis lines=none,
            height=3cm, %% Hard coded height! 
            width=\textwidth, %% width
          ]
          %\addplot [draw=none, fill=fill1, domain=(-3:-2)] {2} \closedcycle;
          %\addplot [draw=none, fill=fill2, domain=(-2:0)] {2} \closedcycle;
          %\addplot [draw=none, fill=fill1, domain=(0:1)] {2} \closedcycle;
          %\addplot [draw=none, fill=fill2, domain=(1:3)] {2} \closedcycle;
          
       
  \addplot [->,ultra thick,textColor] plot coordinates {(0,0) (6.5,0)}; %% axis{0};
         
          \addplot [->,ultra thick,textColor,shorten <=2pt,shorten >=2pt] plot coordinates {(3,1.5) (6,0.5)}; %% decreasing
          \addplot [->,ultra thick,textColor,shorten <=2pt,shorten >=2pt] plot coordinates {(0,.5) (3,1.5)}; %% increasing
          
          \addplot [dashed, textColor] plot coordinates {(6,0) (6,2)};
          \addplot [dashed, textColor] plot coordinates {(0,0) (0,2)};
          \addplot [dashed, textColor] plot coordinates {(3,0) (3,2)};
          
          \node at (axis cs:0,0) [anchor=north,textColor] {\footnotesize$0$};
          \node at (axis cs:3,0) [anchor=north,textColor] {\footnotesize$3$};
          \node at (axis cs:6,0) [anchor=north,textColor] {\footnotesize$6$};

          \node at (axis cs:1.5,-.7) [textColor] {\footnotesize$A'(x)>0$};
          \node at (axis cs:4.5,-.7) [textColor] {\footnotesize$A'(x)<0$};

          %% \node at (axis cs:-2.5,-.5) [anchor=north,textColor] {\footnotesize Decreasing};
          %% \node at (axis cs:.5,-.5) [anchor=north,textColor] {\footnotesize Decreasing};
          %% \node at (axis cs:-1,-.5) [anchor=north,textColor] {\footnotesize Increasing};
          %% \node at (axis cs:2,-.5) [anchor=north,textColor] {\footnotesize Increasing};

        \end{axis}
\end{tikzpicture}
\end{image}

    Since $A'(x)$ is positive
   on
    $(0,3)$ and
   negative on
    $(3,6)$, the function $A$ has a global maximum at $x=3$.  This is
      exactly when the rectangle is a square!
  \end{explanation}
\end{example}

A key step is to explain why $x=3$ is actually the
maximum. Above we basically used facts about the derivative. Below we
use a similar argument.



\begin{example}
  Of all rectangles of area $100$, which has the smallest
  perimeter?
  \begin{explanation}
  The picture below depicts four different rectangles of area $100$. There are infinitely many rectangles with this property, and among all of them we have to find the one with the minimum perimeter.
 We will solve this problem using calculus. 
 
  \begin{image}
  \begin{tikzpicture}
    \draw [penColor,very thick,fill=fill2] (0,0) rectangle (6,3);
      \draw [penColor,very thick,fill=fill2] (-29,0) rectangle (-11,1);
     \draw [penColor,very thick,fill=fill2] (-10,0) rectangle (-1,2);
      \draw [penColor,very thick,fill=fill2] (7,0) rectangle (11,18/4);
     
  \end{tikzpicture}
\end{image}


  First we draw a picture. Here is a rectangle with an area of $100$.
  
\begin{image}
  \begin{tikzpicture}
    \draw [penColor,very thick,fill=fill2] (0,0) rectangle (5,4);
      \node [penColor] at (5.5,2) {\huge$y$};
      \node [above,penColor2] at (-6,3) {\huge$\text{To minimize}: Perimeter$ };
\node [above,penColor] at (2.3,1.6) {\huge$P=2x+2y$ };
\node [above,penColor2] at (-6.1,1) {\huge$Constraint: Area=100$ };
\node [above,penColor2] at (9,3) {\huge$x\cdot y=100$};
\node [above,penColor2] at (9.5,0.5) {\huge$y=\frac{100}{x}$};
    %\node [right,penColor] at (5,2) {$\frac{100}{x}$};
    \node [below,penColor] at (2.5,-0.2) {\huge$x$};
  \end{tikzpicture}
\end{image}
 The perimeter of the rectangle  is 
  \[
    P = 2x+2y.
    \]
   In order to be able to use  calculus techniques,  we have to express the perimeter as a function of a single variable.
   
   To this end, we have to  express the variable, say $y$, in terms of $x$, using the constraint, $A=x\cdot y=100$,
\[
     y=\answer[given]{\frac{100}{x}}.
     \]
     
    Hence the perimeter of a rectangle with area $100$ can be expressed as a function of a single variable, $x$,
    \[
    P(x) = 2x+2\left(\answer[given]{\frac{100}{x}}\right).
    \]
    Again, for the side lengths to be physically relevant, we must
    assume that $x>0$.
    
     Therefore, the domain of  the function $P$ is  the interval
    $(\answer[given]{0},\answer[given]{\infty})$. 
      
    So, to minimize the perimeter of the rectangle, we have to find the global minimum of the function $P$ on the interval $\left(0,\infty\right)$.
    
   Since the domain of $P$ is an open interval, the global minimum (if it exists!) has to be a local minimum and, therefore, it occurs at a critical point.
   So, we have to find all critical points of $P$ on the interval $(0,\infty)$.
    Since
    \[
    P'(x) = \answer[given]{2-\frac{200}{x^2}},
    \]
   in order to find the critical points, we have to solve the equation
    \[
    \answer[given]{2-\frac{200}{x^2}} = 0.
    \]
  Solving for $x$ gives us $x=\pm \answer[given]{10}$. 
Only the value $x=\answer[given]{10}$ is in the domain of $P$.
 Since $P'(x)$ is defined everywhere on the interval
$(0,\infty)$, there are no more critical values, and there are no
endpoints.
 Is there a local maximum, minimum, or neither at $x=10$?
The second derivative is
\[
P''(x)=\answer[given]{400/x^3},
\]
and $P''(10)>0$, so there is a local minimum. Since there is only one
critical point, this is also the global minimum.

 So the rectangle with
smallest perimeter is the $10\times10$  square.

We can illustrate our result with the graph of $P$.
\begin{image}
    \begin{tikzpicture}
      \begin{axis}[
          xmin=0,xmax=30,
            ymin=0,ymax=60,
            domain=-2:2,
            width=2.5in,
            axis lines =middle, xlabel=$x$, ylabel=$y$,
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
        ]
	
       	\addplot [very thick, penColor, smooth, samples=100, domain=0.8:60] {2*x+200/x};
   \addplot [color=penColor,fill=penColor,only marks,mark=*] coordinates{(10,40)};  %% closed hole  
        \node at (axis cs:20,45) [penColor,anchor=west] {$y=P(x)$};          
      \end{axis}
    \end{tikzpicture}
\end{image}
\end{explanation}
\end{example}


Hence, calculus gives a \textbf{reason} for \textbf{why} a square is
the rectangle with both
\begin{itemize}
\item the largest area for a given perimeter.
\item the smallest perimeter for a given area.
\end{itemize}

We may be done with rectangles, but they aren't done with us. Here is
a problem where there are more constraints on the possible side
lengths of the rectangle.

\begin{example} 
Find the rectangle with largest area that fits inside the graph of the
parabola $y=x^2$ below the line $y=a$, where $a$ is an unspecified
positive constant, with the top side of the rectangle on the horizontal
line $y=a$. See the figure below:
\begin{image}
\begin{tikzpicture}
	\begin{axis}[
            domain=-3:3, ymin=0, ymax=9, xmin=-3, xmax=3,
            axis lines =center, xlabel=$x$, ylabel=$y$,
            ticks=none,
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top,
          ]
          \addplot [draw=none, fill=fill2, domain=(-1.5:1.5)] {7} \closedcycle;
          \addplot [draw=none, fill=background, domain=(-1.5:1.5)] {2.25} \closedcycle;

          \addplot [very thick,penColor2,domain=(-3:3)] {x^2};
          \addplot [very thick,penColor5,domain=(-3:3)] {7};

          \addplot [very thick, penColor] plot coordinates {(1.5,2.25) (-1.5,2.25)};
          \addplot [very thick, penColor] plot coordinates {(1.5,2.25) (1.5,7)};
          \addplot [very thick, penColor] plot coordinates {(1.5,7) (-1.5,7)};
          \addplot [very thick, penColor] plot coordinates {(-1.5,7) (-1.5,2.25)};
          
          \addplot [color=penColor,fill=penColor,only marks,mark=*] coordinates{(1.5,2.25)};  %% closed hole          
          \addplot [color=penColor,fill=penColor,only marks,mark=*] coordinates{(-1.5,2.25)};  %% closed hole          
          \addplot [color=penColor,fill=penColor,only marks,mark=*] coordinates{(1.5,7)};  %% closed hole          
          \addplot [color=penColor,fill=penColor,only marks,mark=*] coordinates{(-1.5,7)};  %% closed hole   

          \node at (axis cs:0,4.625) [penColor] {$A(x) =$~area};
          \node at (axis cs:1.5,2.25) [anchor=west,penColor] {$(x,x^2)$};
          \node at (axis cs:1.5,7.2) [anchor=west,penColor] {$(x,a)$};
           \node at (axis cs:-2.9,8.4) [anchor=west,penColor2] {$y=x^2$};
        \end{axis}
\end{tikzpicture}
\end{image}
\begin{explanation}

The picture below shows three such  rectangles. There are infinitely many such rectangles, one for each choice of $x$ in $(0,\sqrt{a})$.

\begin{image}
\begin{tikzpicture}
	\begin{axis}[
            domain=-4:4, ymin=0, ymax=9, xmin=-4, xmax=4,
            axis lines =center, xlabel=$x$, ylabel=$y$,
            ticks=none,
            every axis y label/.style={at=(current axis.above origin),anchor=south},
            every axis x label/.style={at=(current axis.right of origin),anchor=west},
            axis on top,
          ]
          \addplot [draw=none, fill=fill2, domain=(-1.5:1.5)] {7} \closedcycle;
          \addplot [draw=none, fill=fill2, domain=(-1.5:1.5)] {2.25} \closedcycle;
            \addplot [draw=none, fill=fill4, domain=(-0.5:0.5)] {7} \closedcycle;
          \addplot [draw=none, fill=fill2, domain=(-0.5:0.5)] {0.25} \closedcycle;

  \addplot [draw=none, fill=fill4, domain=(-2.5:2.5)] {7} \closedcycle;
          \addplot [draw=none, fill=background, domain=(-2.5:2.5)] {6.25} \closedcycle;

          \addplot [very thick,penColor2,domain=(-4:4)] {x^2};
          \addplot [very thick,penColor5,domain=(-4:4)] {7};

          \addplot [very thick, penColor] plot coordinates {(1.5,2.25) (-1.5,2.25)};
          \addplot [very thick, penColor] plot coordinates {(1.5,2.25) (1.5,7)};
          \addplot [very thick, penColor] plot coordinates {(1.5,7) (-1.5,7)};
          \addplot [very thick, penColor] plot coordinates {(-1.5,7) (-1.5,2.25)};
           \addplot [very thick, penColor3] plot coordinates {(0.5,0.25) (-0.5,0.25)};
          \addplot [very thick, penColor3] plot coordinates {(0.5,0.25) (0.5,7)};
          \addplot [very thick, penColor3] plot coordinates {(0.5,7) (-0.5,7)};
          \addplot [very thick, penColor3] plot coordinates {(-0.5,7) (-0.5,0.25)};
           \addplot [very thick, penColor4] plot coordinates {(2.5,6.25) (-2.5,6.25)};
          \addplot [very thick, penColor4] plot coordinates {(2.5,6.25) (2.5,7)};
          \addplot [very thick, penColor4] plot coordinates {(2.5,7) (-2.5,7)};
          \addplot [very thick, penColor4] plot coordinates {(-2.5,7) (-2.5,6.25)};
          
          \addplot [color=penColor,fill=penColor,only marks,mark=*] coordinates{(1.5,2.25)};  %% closed hole          
          \addplot [color=penColor4,fill=penColor,only marks,mark=*] coordinates{(2.5,6.25)};  %% closed hole          
          \addplot [color=penColor3,fill=penColor,only marks,mark=*] coordinates{(0.5,0.25)};  %% closed hole          
         % \addplot [color=penColor,fill=penColor,only marks,mark=*] coordinates{(-1.5,7)};  %% closed hole   

        %  \node at (axis cs:0,4.625) [penColor] {$A(x) =$~area};
          \node at (axis cs:1.5,2.25) [anchor=west,penColor] {$(x,x^2)$};
            \node at (axis cs:0.5,0.25) [anchor=west,penColor3] {$(x_{1},x_{1}^2)$};
             \node at (axis cs:2.5,6.25) [anchor=west,penColor4] {$(x_{2},x_{2}^2)$};
          \node at (axis cs:-4,7.2) [anchor=west,penColor5] {$y=a$};
           \node at (axis cs:-2.9,8.4) [anchor=west,penColor2] {$y=x^2$};
        \end{axis}
\end{tikzpicture}
\end{image}



We want to maximize $A$,  the area of the rectangle.  The lower right corner of the
rectangle is at $(x,x^2)$, and once this is chosen the rectangle is
completely determined. Let $h$ denote the height and let $w$ denote the width of the rectangle.

Then
\[
A=w\cdot h,
\]
where
\[
w=2x   \text{     and     } h=\answer[given]{a-x^2}.
\]  
Therefore, we can express the area $A$ as a function of $x$
\[
A(x)=2x\left(\answer[given]{a-x^2}\right).
\] 
We want the maximum value of $A(x)$ when $x$ is in $[0,\sqrt{a}]$. You
might object to allowing $x=0$ or $x=\sqrt{a}$, since then the
``rectangle'' has either no width or no height, so is not ``really'' a
rectangle. But the problem is somewhat easier if we simply allow such
rectangles, which have zero area as we may then apply the Extreme
Value Theorem and see that we indeed have a maximum and minimum value.
\begin{quote}
  \textbf{At this point, you should graph the function if you can.}
\end{quote}
Setting $0=A'(x)=\answer[given]{-6x^2+2a}$ we find
$x=\answer[given]{\sqrt{a/3}}$ as the only critical point. Testing
this and the two endpoints (as the maximum could also be there), we
have $A(0)=A(\sqrt{a})=\answer[given]{0}$ and
$A(\sqrt{a/3})=\answer[given]{(4/9)\sqrt{3}a^{3/2}}$. Hence, the maximum area
occurs when the rectangle has dimensions $2\sqrt{a/3}\times (2/3)a$.
\end{explanation}
\end{example}

Again, note that above we used the Extreme Value Theorem to guarantee
that we found the maximum.

\end{document}
